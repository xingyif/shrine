<template>
    <require from="views/query-viewer/result-style.converter"></require>
    <require from="views/query-viewer/result-value.converter"></require>
    <require from="views/query-viewer/box-style.converter"></require>
    <require from="views/query-viewer/context-menu/context-menu"></require>
    <require from="views/query-viewer/loading-bar/loading-bar"></require>

    <loading-bar status.bind="'Loading...'" if.bind="showLoader"></loading-bar>
    <div style="width: 100%; text-align: center">  
        <ul class="circle-pagination" if.bind="showCircles">
            <li repeat.for="screen of screens" class="${screenIndex === $index? 'active' : ''}"
            click.delegate="screenIndex = $index">
                <div>${screen.id}</div>
            </li>
        </ul>
    </div>
    <div class="box-wrapper">
        <div class="box" repeat.for="screen of screens" css.bind="screenIndex | boxStyle">
            <section>
                <div>
                    <table cellpadding="0" cellspacing="0" border="0">
                        <thead>
                            <tr>
                                <th class="tbl-header">
                                </th>
                                <th repeat.for="node of screen.nodes" class="tbl-header">
                                    <div class="hideextra">${node}</div>
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <context-menu context.bind="context"></context-menu>
                <div class="tbl-content ${vertStyle}">
                    <table cellpadding="0" cellspacing="0" border="0">
                        <tbody>
                            <tr repeat.for="result of screen.results" contextmenu.trigger="context = getContext($event, result)">
                                <th>
                                    <div class="hideextra">${result.name}</div>
                                </th>
                              <td repeat.for="nodeResult of result.nodeResults" 
                                    css="${nodeResult | resultStyle}">
                                    ${nodeResult | result}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>
</template>